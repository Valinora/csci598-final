{% load static %}
<link rel="stylesheet" href="{% static 'bathroom.css' %}">

<a href="/bathrooms/{{ bathroom.bathroom.id }}"
   class="card shadow rounded list-group-item list-group-item-action container-sm d-flex flex-row mb-2 align-items-center"
   style="height: 160px;">

  {% if bathroom.photo_url %}
    <img src="{{ bathroom.photo_url }}" alt="Bathroom Photo"
         class="bathroom-photo me-3" />
  {% endif %}

  <div id="bathroom-details" class="flex-grow-1">
    <h2 class="card-title d-flex align-items-center flex-wrap">
      {{ bathroom.bathroom.name }}

      {% if bathroom.bathroom.report_no > bathroom.bathroom.report_yes %}
        <span class="ms-2 text-danger" style="font-size: 1.25rem;" title="Users reported no bathroom here">ðŸš©</span>
      {% endif %}

    <form method="POST" action="/quickrate/{{ bathroom.bathroom.id }}/"
      class="d-flex align-items-center ms-3 star-rating-container"
      data-average="{{ bathroom.average_rating }}"
      data-user="{{ bathroom.user_quick_rating|default:'0' }}">
      {% csrf_token %}
      {% for i in "12345" %}
      <button type="submit"
        name="rating"
        value="{{ i }}"
        class="btn p-0 border-0 bg-transparent hover-star"
        style="font-size: 1.5rem;">
        <i class="fa-regular fa-star"></i>  <!-- placeholder icon -->
      </button>
      {% endfor %}
    </form>
    </h2>

    {% if bathroom.bathroom.report_no > bathroom.bathroom.report_yes %}
    <div class="text-danger small fw-semibold">Users have reported no bathroom here</div>
    {% endif %}

    <div class="card-text">
      <p class="mb-0">
        Address: {{ bathroom.bathroom.address }}<br />
        Rating: {{ bathroom.bathroom.rating }}<br />
        Distance: {{ bathroom.distance|floatformat:2 }} km
      </p>
    </div>
  </div>

  <div class="ms-auto d-flex flex-column align-items-end justify-content-center text-end" style="min-width: 250px;">
    <p class="mb-1 fw-bold">Is there a bathroom here?</p>

    <div class="d-flex flex-row gap-2 mb-2">
      <form method="POST" action="/report/{{ bathroom.bathroom.id }}/yes/">
        {% csrf_token %}
        <button type="submit" class="btn btn-outline-success btn-sm">Yes</button>
      </form>
      <form method="POST" action="/report/{{ bathroom.bathroom.id }}/no/">
        {% csrf_token %}
        <button type="submit" class="btn btn-outline-danger btn-sm">No</button>
      </form>
    </div>

    <small class="text-muted">
      {{ bathroom.bathroom.report_yes }} user{{ bathroom.bathroom.report_yes|pluralize }} reported a bathroom here<br>
      {{ bathroom.bathroom.report_no }} user{{ bathroom.bathroom.report_no|pluralize }} reported no bathroom here
    </small>
  </div>
</a>
